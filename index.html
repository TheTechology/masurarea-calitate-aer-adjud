<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asociația Grupul Verde - Proiect educațional ”Monitorizare Calitate Aer„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .logo:hover {
      transform: scale(1.05);
      transition: transform 0.3s ease;
    }
    .fade-in {
      animation: fadeIn 1.2s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-green-100 to-blue-200 min-h-screen px-4 py-6">
  <header class="flex flex-col items-center mb-6 fade-in">
    <a href="https://github.com/TheTechology/masurarea-calitate-aer-adjud/blob/main/LGV.png" target="_blank">
      <img class="h-20 md:h-24 drop-shadow-xl logo mb-4" src="https://raw.githubusercontent.com/TheTechology/masurarea-calitate-aer-adjud/main/LGV.png" alt="Logo" />
    </a>
    <h1 class="text-4xl font-extrabold text-green-900 mb-2 text-center">Monitorizare Calitate Aer &amp; Temperatură</h1>
    <p class="text-sm text-gray-700 max-w-xl text-center">Platformă educațională realizată de Asociația Grupul Verde cu implicarea elevilor Colegiului Tehnic „Gheorghe Balș” - Protecția Mediului</p>
  </header>

  <main class="bg-white rounded-3xl shadow-2xl p-8 max-w-5xl mx-auto fade-in">
    <section class="mb-10">
      <div class="flex items-center gap-2 mb-2">
        <i class="ph ph-thermometer-simple text-red-500 text-2xl"></i>
        <h2 class="text-xl font-semibold text-gray-800">Temperatura actuală</h2>
      </div>
      <p class="text-lg mb-1">Temperatură: <span class="font-bold text-blue-700" id="temperatureValue">--</span> °C</p>
      <p class="text-md text-gray-600" id="weatherStatus">Condiții: --</p>
    </section>

    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
      <div class="bg-white rounded-xl shadow-md p-5">
        <div class="flex items-center gap-2 mb-2">
          <i class="ph ph-calendar-blank text-gray-700 text-xl"></i>
          <h3 class="text-lg font-semibold text-gray-800">Istoric temperatură - 7 zile</h3>
        </div>
        <canvas id="historyChart"></canvas>
      </div>
      <div class="bg-white rounded-xl shadow-md p-5">
        <div class="flex items-center gap-2 mb-2">
          <i class="ph ph-cloud-rain text-blue-500 text-xl"></i>
          <h3 class="text-lg font-semibold text-gray-800">Date suplimentare meteorologice</h3>
        </div>
        <ul class="space-y-2 text-gray-700 text-sm">
          <li>Aerul resimțit: <span class="font-semibold" id="feelsLike">--</span> °C</li>
          <li>Presiune atmosferică: <span class="font-semibold" id="pressure">--</span> hPa</li>
          <li>Indice UV: <span class="font-semibold" id="uvIndex">--</span></li>
          <li>Viteza vântului: <span class="font-semibold" id="windSpeed">--</span> m/s</li>
          <li>Umiditate: <span class="font-semibold" id="humidity">--</span> %</li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="w-full bg-slate-800 text-white py-6 mt-12 fade-in">
    <div class="max-w-5xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
      <div class="text-center md:text-left mb-4 md:mb-0">
        <h3 class="text-lg font-semibold">Asociația Grupul Verde</h3>
        <p class="text-sm text-slate-300">© 2025 Toate drepturile rezervate.</p>
      </div>
      <div class="flex space-x-4">
        <a class="text-slate-300 hover:text-white text-sm" href="#">GitHub</a>
      </div>
    </div>
  </footer>

  <script>
    const apiKey = "345bfb1800c59f8f650f0159b1ad1a71";
    const lat = 46.1667;
    const lon = 27.05;

    const tempEl = document.getElementById("temperatureValue");
    const condEl = document.getElementById("weatherStatus");
    const feelsEl = document.getElementById("feelsLike");
    const pressEl = document.getElementById("pressure");
    const uvEl = document.getElementById("uvIndex");
    const windEl = document.getElementById("windSpeed");
    const humEl = document.getElementById("humidity");

    const historyCtx = document.getElementById("historyChart").getContext("2d");
    const historyChart = new Chart(historyCtx, {
      type: "line",
      data: {
        labels: [],
        datasets: [{
          label: "Temperatura zilnică (°C)",
          data: [],
          backgroundColor: "rgba(37,99,235,0.2)",
          borderColor: "rgba(37,99,235,1)",
          borderWidth: 2,
          fill: true,
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: false }
        }
      }
    });

    async function getWeatherData() {
      try {
        const res = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=minutely,hourly,alerts&units=metric&appid=${apiKey}`);
        const data = await res.json();

        tempEl.textContent = data.current.temp.toFixed(1);
        condEl.textContent = "Condiții: " + data.current.weather[0].description;
        feelsEl.textContent = data.current.feels_like.toFixed(1);
        pressEl.textContent = data.current.pressure;
        uvEl.textContent = data.current.uvi;
        windEl.textContent = data.current.wind_speed;
        humEl.textContent = data.current.humidity;

        const labels = [];
        const temps = [];
        data.daily.slice(0, 7).forEach(day => {
          const date = new Date(day.dt * 1000);
          labels.push(date.toLocaleDateString("ro-RO", { weekday: "short" }));
          temps.push(day.temp.day.toFixed(1));
        });

        historyChart.data.labels = labels;
        historyChart.data.datasets[0].data = temps;
        historyChart.update();
      } catch (err) {
        console.error("Eroare la preluarea datelor de la OpenWeather:", err);
      }
    }

    getWeatherData();
  </script>
</body>
</html>
